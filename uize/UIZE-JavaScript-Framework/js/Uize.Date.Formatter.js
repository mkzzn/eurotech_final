/*
	UIZE JAVASCRIPT FRAMEWORK 2012-01-10

	http://www.uize.com/reference/Uize.Date.Formatter.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Date.Formatter',builder:function(){var _a=function(){},_b=Uize.Date;var _c,_d={YYYY:'\\d{4}',YY:'\\d\\d',MM:'1[0-2]|0[1-9]',monthNo:'1[0-2]|0?[1-9]',DD:'30|31|[1-2]\\d|0[1-9]',dayNo:'30|31|[1-2]\\d|0?[1-9]',dayNoSuffix:_b.dayNoSuffixes.join('|'),hh:'[0-1]\\d|2[0-3]',h12:'1[0-2]|0?[1-9]',hh12:'1[0-2]|0[1-9]',mm:'[0-5]\\d',minutes:'[0-5]?\\d',ss:'[0-5]\\d',seconds:'[0-5]?\\d',zzz:'\\d{3}',milliseconds:'\\d{1,3}',ampm:'am|pm'},_e=['monthName','shortMonthName','dayName','shortDayName'],_f=String.fromCharCode(7);function _g(_h,_i){_i=_i.toLowerCase();for(var _j= -1,_k=_h.length;++_j<_k;)if(_i==_h[_j].toLowerCase())return _j;return-1;}_a.format=_a.toPretty=_b.format;_a.parse=function(_l,_m){var _n;if(typeof _l=='object'&&_l&& !(_l instanceof Date))_l=_l.valueOf();if(_l instanceof Date)return _l;if(_l==null||_l=='')return;if(typeof _l=='number')return new Date(_l);if(!_m)return _b.resolve(_l);Uize.lookup(_e,null,_d);if(!_c)_c=new RegExp('\\{('+Uize.keys(_d).join('|')+')\\}','g');var _o=[],
_p=0,_q=new RegExp(Uize.escapeRegExpLiteral(_m.replace(_c,function(_r,_n){_o.push(_n);return _f;})).replace(/\s+/g,'\\s+').replace(/\x07/g,function(){return('\\s*('+(_d[_n=_o[_p++]]||(_d[_n]=_b[_n+'s'].join('|')))+')\\s*');}),'i'),_s=(_l+'').match(_q);if(_s){var _t=0,_u=1,_v=1,_w,_x=0,_y=0,_z=0,_A=0,_B=false;for(var _C=0,_D=_s.length;++_C<_D;){var _E=_s[_C];switch(_o[_C-1]){case'YYYY':_t= +_E;break;case'YY':_t=1900+ +_E;break;case'MM':case'monthNo':_u= +_E;break;case'monthName':_u=_g(_b.monthNames,_E)+1;break;case'shortMonthName':_u=_g(_b.shortMonthNames,_E)+1;break;case'DD':case'dayNo':_v= +_E;break;case'hh':_w= +_E;break;case'h12':case'hh12':_x= +_E;break;case'mm':case'minutes':_y= +_E;break;case'ss':case'seconds':_z= +_E;break;case'zzz':case'milliseconds':_A= +_E;case'ampm':_B=/^pm$/i.test(_E)}}return _b(_t,_u,_v,_w!==undefined?_w:_x*(_x!=12)+_B*12,_y,_z,_A);}};return _a;}});