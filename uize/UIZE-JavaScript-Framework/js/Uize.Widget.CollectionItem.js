/*
	UIZE JAVASCRIPT FRAMEWORK 2012-01-10

	http://www.uize.com/reference/Uize.Widget.CollectionItem.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.CollectionItem',required:['Uize.Node','Uize.Widget.Button','Uize.Node.Classes'],builder:function(c_a){var c_b=true,c_c=false,c_d;var c_e=c_a.subclass(function(){this.c_f={};},function(){var c_g=this;c_g.c_h('select',function(c_i){c_g.c_j(c_i.domEvent,c_b)}).set({clickToSelect:c_b,clickToDeselect:c_b});c_g.c_k();c_g.c_h('remove',function(c_i){c_g.fire({name:'Remove',byUser:c_b})});}),c_l=c_e.prototype;c_l.c_h=c_l.addChildButton=Uize.Widget.Button.addChildButton;c_l.c_m=function(){if(this.isWired){var c_n=this.c_n;c_n!=c_d&&this.setNodeInnerHtml('title',c_n);}};c_l.c_o=function(){var c_g=this;if(c_g.isWired){Uize.Node.Classes.setState(c_g.getNode(),['',c_g.c_p,c_g.c_q],(c_g.c_r?2:c_g.c_s&&1)||0);var c_t=c_g.c_t,c_u=c_g.c_u;typeof c_t=='string'&&typeof c_u=='string'&&Uize.Node.Classes.setState(c_g.getNode('preview'),[c_t,c_u],c_g.c_s);}};c_l.c_j=function(c_v,c_w){this.fire({name:'Click Selected',domEvent:c_v,forceToggle:c_w})};c_l.c_k=function(){var c_x=this.children.select;
c_x.get('state')!='over'&&c_x.set({selected:this.c_r});};c_l.updateUi=function(){this.c_o();this.c_m();};c_l.wireUi=function(){var c_g=this;if(!c_g.isWired){var c_y=c_g.getNode();if(c_g.c_z&&c_y)c_y.className=c_g.c_z;var c_A=c_g.getNode('previewShell')||'imageLink';function c_B(c_i){c_g.fire({name:'Item Mouse Down',domEvent:c_i,bubble:c_b})}c_g.wireNode(c_A,{mouseover:function(){c_g.set({c_s:c_b})},mouseout:function(){c_g.set({c_s:c_c})},touchstart:c_B,mousedown:c_B});if(c_g.c_C)c_g.wireNode(c_A,'click',function(c_i){var c_w=c_g.c_C=='Toggle Selected';c_w||c_g.c_C=='Select'?c_g.c_j(c_i,c_w):c_g.fire({name:'Click Preview',bubble:c_b});});c_a.prototype.wireUi.call(c_g);}};c_e.registerProperties({c_q:'cssClassActive',c_z:'cssClassBase',c_t:'cssClassImage',c_u:'cssClassImageOver',c_p:'cssClassOver',c_D:{name:'locked',value:c_c},c_s:{name:'over',onChange:[function(){var c_g=this;c_g.isWired&&c_g.c_E&&Uize.Tooltip&&Uize.Tooltip.showTooltip(c_g.c_E,c_g.c_s);},c_l.c_o],value:c_c},c_C:'previewClickAction',
c_E:'previewTooltip',c_f:{name:'properties',onChange:function(){var c_f=this.c_f;'title'in c_f&&this.set({c_n:c_f.title})}},c_r:{name:'selected',onChange:function(){this.children.select&&this.c_k();this.c_o();},value:c_c},c_n:{name:'title',onChange:function(){var c_g=this,c_f=c_g.c_f;if(c_f){c_f.title=c_g.c_n;c_g.c_m();}}}});return c_e;}});