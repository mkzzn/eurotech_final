/*
	UIZE JAVASCRIPT FRAMEWORK 2012-01-10

	http://www.uize.com/reference/Uize.String.Lines.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.String.Lines',required:'Uize.String',builder:function(){var _a=function(){},_b;var _c=/\r\n|\n|\r/;_a.forEach=function(_d,_e){if(_d){var _f=0,_g=new RegExp('([^\\n\\r]*)(\\r\\n|\\n|\\r|$)','g'),_h,_i;while(_i!==false&&(_h=_g.exec(_d))&&_h[0])_i=_e(_h[1],_h[2],_f++);}else{_e('','',0);}};_a.getIndentRange=function(_d,_j){var _k=Infinity,_l= -_k;if(_d){if(_j==_b)_j='\t';if(_j){var _m=_j.length,_n,_o=new RegExp('(?:^|\\r\\n|\\n|\\r)((?:'+_j.replace(/\t/g,'\\t')+')*)\\S','g'),_p;while(_p=_o.exec(_d)){_k=Math.min(_k,_n=_p[1].length/_m);_l=Math.max(_l,_n);}}}if(_k==Infinity)_k=_l=0;return{minValue:_k,maxValue:_l};};_a.getLinebreakType=function(_d,_q){var _r=_d.match(/\r\n|\n|\r/);return _r?_r[0]:(_q||'\n');};_a.indent=function(_d,_s,_j,_t){if(_j==_b)_j='\t';if(!_d|| !_s|| !_j)return _d;_t=_t!==false;var _u=Uize.String.repeat(_j,_s);return(_u&&_t&& !_c.test(_d)?_u+_d:_d.replace(new RegExp('(^|\\r\\n|\\n|\\r)'+(_s>0?'()':'('+_j.replace(/\t/g,'\\t')+'){1,'+ -_s+'}'
)+'('+(_s>0?'[^\\n\\r]':'')+')','g'),function(_v,_w,_x,_y){return(_w+(_t||_w?_u:'')+_y);}));};_a.modify=function(_d,_z){var _f=0,_A;return(_d.replace(/([^\n\r]*)(\r\n|\n|\r|$)/g,function(_v,_B,_C){if(!_v)return'';return(typeof(_A=_z(_B,_C,_f++))!='boolean'?_A+_C:_A?_B+_C:'');}));};_a.normalizeIndent=function(_d,_j){return _a.indent(_d,-Uize.String.Lines.getIndentRange(_d,_j).minValue,_j);};_a.removeBlanks=function(_d,_D){function _E(_B){return!!_B}return _a.removeMatching(_d,_D?_E:Uize.String.trim,1);};_a.removeMatching=function(_d,_v,_F){_F= !!_F;return _a.modify(_d,Uize.isFunction(_v)?function(_B){return!!_v(_B)==_F}:function(_B){return _v.test(_B)==_F});};_a.retainMatching=function(_d,_v){return _a.removeMatching(_d,_v,1);};_a.split=function(_d){return(_d.indexOf('\r')+1?_d.replace(/\r\n?/g,'\n'):_d).split('\n');};_a.switchIndentType=function(_d,_G,_H){if(_G==_b)_G='    ';if(_H==_b)_H='\t';var _I=_G.length,_J=[],_n;return(_d.replace(new RegExp('(^|\\r\\n|\\n|\\r)((?:'+_G.replace(/\t/g,'\\t')+')+)','g'),
function(_v,_w,_x){return(_w+(_J[_n=_x.length/_I]||(_J[_n]=Uize.String.repeat(_H,_n))));}));};_a.switchLinebreakType=function(_d,_C){return _d.replace(/\r\n|\n|\r/g,_C==null?'\n':_C);};_a.trim=function(_d,_K){return _a.modify(_d,function(_B){return Uize.String.trim(_B,_K)});};_a.trimLeft=function(_d){return _a.trim(_d,-1);};_a.trimRight=function(_d){return _a.trim(_d,1);};return _a;}});