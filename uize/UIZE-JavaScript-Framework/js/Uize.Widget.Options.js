/*
	UIZE JAVASCRIPT FRAMEWORK 2012-01-10

	http://www.uize.com/reference/Uize.Widget.Options.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Widget.Options',required:'Uize.Widget.Button',builder:function(c_a){var c_b=false,c_c=null,c_d;var c_e=c_a.subclass(c_c,function(){this.c_f= -1;this.c_g=0;}),c_h=c_e.prototype;c_h.c_i=function(){var c_j=this;if(c_j.isWired&&c_j.c_k!=c_j.c_f){function c_l(c_m,c_n){c_m>=0&&Uize.callOn(c_j.children['option'+c_m],'set',[{selected:c_n}]);}c_l(c_j.c_f,c_b);c_l(c_j.c_f=c_j.c_k,true);}};c_h.c_o=function(){var c_j=this;c_j.set({c_k:c_j.getValueNoFromValue(c_j.c_p)});c_j.c_i();};c_h.forAll=function(c_q){for(var c_k= -1,c_r=this.c_s.length,c_t=this.children;++c_k<c_r;)if(c_q(c_t['option'+c_k],c_k)===c_b)break;;};c_h.getValueNoFromValue=function(c_p){var c_s=this.c_s;return(c_s.length?(typeof c_s[0]=='object'?Uize.findRecordNo(c_s,{name:c_p}):Uize.indexIn(c_s,c_p,c_b,c_b)): -1);};c_h.getOptionProperties=function(c_k,c_u){return c_c};c_h.updateUi=function(){var c_j=this;if(c_j.isWired){c_j.c_i();c_a.prototype.updateUi.call(c_j);}};c_h.wireUi=function(){var c_j=this;if(!c_j.isWired){c_j.c_k= -1;var
 c_v=c_j.c_v||Uize.Widget.Button,c_w=c_j.c_w,c_s=c_j.c_s,c_r=c_j.c_g=c_s.length,c_x,c_y;function c_z(){c_x=c_c;c_j.set({c_A:c_j.c_p,c_B:c_j.c_k});}function c_C(){c_x&&clearTimeout(c_x);c_y&&clearTimeout(c_y);}Uize.forEach(c_s,function c_D(c_u,c_k){var c_p=((typeof c_u=='object'&&c_u)||(c_u={name:c_u})).name;function c_E(){c_j.set(c_j.c_F?{c_p:c_p}:{c_A:c_p,c_B:c_k});}c_j.addChild('option'+c_k,c_v,Uize.copyInto({},c_w,c_j.getOptionProperties(c_k,c_u))).wire('*',function(c_G){if(c_G.name=='Click'){c_j.fire({name:'Before Value Change',value:c_p,valueNo:c_k}).cancel||c_j.set({c_p:c_p});c_j.fire(c_G);}else if(c_G.name=='Over'){c_C();c_j.c_H?(c_y=setTimeout(c_E,c_j.c_H)):c_E();}else if(c_G.name=='Out'){c_C();c_x=setTimeout(c_z,250);}c_j.fire({name:'Option Event',value:c_p,childEvent:c_G});});});if(c_r){var c_I=c_j.getNode();if(c_I){for(var c_J= -1,c_K,c_L,c_M,c_N=c_I.childNodes||[],c_O=c_N.length,c_t=c_j.children,c_P=c_j.get('idPrefix'),c_Q=c_P.length;++c_J<c_O;){if((c_L=(c_K=c_N[c_J]).id)&& !c_L.indexOf(c_P)&&
(c_M=c_t[c_L.slice(c_Q+1)]))c_M.set({nodeMap:{'':c_K,shell:c_c,bed:c_c}});}}}c_a.prototype.wireUi.call(c_j);c_j.c_o();}};function c_R(c_p){var c_j=this,c_s=this.c_s;return(!c_j.c_S|| !c_s|| !c_s.length||c_j.getValueNoFromValue(c_p)> -1?c_p:(typeof c_s[0]=='object'?c_s[0].name:c_s[0]));}c_e.registerProperties({c_S:{name:'ensureValueInValues',onChange:function(){var c_j=this;c_j.set({c_p:c_R.call(c_j,c_j.c_p)});},value:c_b},c_v:'optionWidgetClass',c_w:'optionWidgetProperties',c_F:'setValueOnMouseover',c_H:{name:'tentativeRestTime',value:0},c_A:{name:'tentativeValue',value:c_c},c_B:{name:'tentativeValueNo',value:-1},c_p:{name:'value',conformer:c_R,onChange:function(){var c_j=this;c_j.c_o();c_j.set({c_B:c_j.c_k,c_A:c_j.c_p});},value:c_c},c_k:{name:'valueNo',value:-1},c_s:{name:'values',onChange:function(){var c_j=this;if(c_j.isWired){for(var c_k= -1,c_g=c_j.c_g||0;++c_k<c_g;)c_j.removeChild('option'+c_k);c_j.unwireUi();c_j.get('html')!=c_d&&c_j.set({built:c_b});c_j.insertOrWireUi();}},value:[]}});return c_e;}});